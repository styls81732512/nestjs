import { QueryRunner } from 'typeorm';
import * as _ from 'lodash';

const PermissionTables = {
  'CORE:READ': ['CORE', '測試用讀取權限'],
  'CORE:WRITE': ['CORE', '測試用寫入權限'],
  'CORE:DELETE': ['CORE', '測試用刪除權限'],
  'PERMISSIONS:READ_USERS': ['PERMISSIONS', '取得用戶資訊'],
  'PERMISSIONS:WRITE_USERS': ['PERMISSIONS', '創建、更新用戶或指定用戶群組'],
  'PERMISSIONS:DELETE_USERS': ['PERMISSIONS', '刪除用戶'],
  'PERMISSIONS:READ_GROUPS': ['PERMISSIONS', '取得群組資訊'],
  'PERMISSIONS:WRITE_GROUPS': [
    'PERMISSIONS',
    '創建、更新群組或指定群組所屬角色',
  ],
  'PERMISSIONS:DELETE_GROUPS': ['PERMISSIONS', '刪除群組'],
  'PERMISSIONS:READ_ROLES': ['PERMISSIONS', '取得角色資訊'],
  'PERMISSIONS:WRITE_ROLES': [
    'PERMISSIONS',
    '創建、更新角色或指定角色所屬權限',
  ],
  'PERMISSIONS:DELETE_ROLES': ['PERMISSIONS', '刪除角色'],
  'PERMISSIONS:READ_PERMISSION': ['PERMISSIONS', '取得權限資訊'],
  'PERMISSIONS:WRITE_PERMISSION': ['PERMISSIONS', '創建或更新權限'],
  'PERMISSIONS:DELETE_PERMISSION': ['PERMISSIONS', '刪除權限'],
  'SYSTEM_SETTING:READ_SYSTEM_SETTING': ['SYSTEM_SETTING', '讀取系統參數'],
  'SYSTEM_SETTING:READ_SYSTEM_SETTING_DEFINITION': [
    'SYSTEM_SETTING',
    '取得系統定義檔',
  ],
  'MERCHANT-CENTER:READ_DASHBOARD': ['MERCHANT-CENTER', '检视数据看板'],
  'MERCHANT-CENTER:MODIFY_SECURE_SETTING': ['MERCHANT-CENTER', '安全中心许可'],
  'MERCHANT-CENTER:READ_WALLET': ['MERCHANT-CENTER', '商户钱包管理'],
  'PERMISSIONS:READ_PROXY': ['PERMISSIONS', '讀取代理路由'],
  'PERMISSIONS:WRITE_PROXY': ['PERMISSIONS', '新增修改代理路由'],
  'PERMISSIONS:DELETE_PROXY': ['PERMISSIONS', '刪除代理路由'],
  'MERCHANT-PERMISSION:READ_MERCHANT_USERS': [
    'MERCHANT-PERMISSION',
    '取得用戶資訊',
  ],
  'MERCHANT-PERMISSION:WRITE_MERCHANT_USERS': [
    'MERCHANT-PERMISSION',
    '創建、更新用戶或指定用戶群組',
  ],
  'MERCHANT-PERMISSION:DELETE_MERCHANT_USERS': [
    'MERCHANT-PERMISSION',
    '刪除用戶',
  ],
  'MERCHANT-PERMISSION:READ_MERCHANT_GROUPS': [
    'MERCHANT-PERMISSION',
    '取得群組資訊',
  ],
  'MERCHANT-PERMISSION:WRITE_MERCHANT_GROUPS': [
    'MERCHANT-PERMISSION',
    '創建、更新群組或指定群組所屬角色',
  ],
  'MERCHANT-PERMISSION:DELETE_MERCHANT_GROUPS': [
    'MERCHANT-PERMISSION',
    '刪除群組',
  ],
  'MERCHANT-PERMISSION:READ_MERCHANT_ROLES': [
    'MERCHANT-PERMISSION',
    '取得角色資訊',
  ],
  'MERCHANT-PERMISSION:WRITE_MERCHANT_ROLES': [
    'MERCHANT-PERMISSION',
    '創建、更新角色或指定角色權限',
  ],
  'MERCHANT-PERMISSION:DELETE_MERCHANT_ROLES': [
    'MERCHANT-PERMISSION',
    '刪除角色',
  ],
  'MERCHANT-PERMISSION:READ_MERCHANT_PERMISSION': [
    'MERCHANT-PERMISSION',
    '讀取權限清單',
  ],
  'PERMISSIONS:READ_USERS_ADMIN': ['PERMISSIONS', 'READ_USERS_ADMIN'],
  'PERMISSIONS:READ_GROUPS_ADMIN': ['PERMISSIONS', 'READ_GROUPS_ADMIN'],
  'MERCHANT-PERMISSION:READ_SYSTEM': [
    'MERCHANT-PERMISSION',
    '取得系統商戶清單',
  ],
  'MERCHANT-PERMISSION:WRITE_SYSTEM': [
    'MERCHANT-PERMISSION',
    '修改系統商戶資訊',
  ],
  '501:100': ['ACTORS', '新增單筆演員'],
  '501:200': ['ACTORS', '刪除單筆演員'],
  '501:203': ['ACTORS', '刪除演員快取'],
  '501:302': ['ACTORS', '取得單筆演員'],
  '501:301': ['ACTORS', '取得演員清單'],
  '501:400': ['ACTORS', '編輯單筆演員'],
  '501:401': ['ACTORS', '切換單筆演員狀態'],
  '502:100': ['REGIONS', '新增單筆地區'],
  '502:200': ['REGIONS', '刪除單筆地區'],
  '502:203': ['REGIONS', '刪除地區快取'],
  '502:302': ['REGIONS', '查詢單筆地區'],
  '502:301': ['REGIONS', '取得地區清單'],
  '502:400': ['REGIONS', '編輯單筆地區'],
  '502:401': ['REGIONS', '切換單筆地區狀態'],
  '503:100': ['SUPPLIERS', '新增單筆供應商'],
  '503:200': ['SUPPLIERS', '刪除單筆供應商'],
  '503:203': ['SUPPLIERS', '刪除供應商快取'],
  '503:302': ['SUPPLIERS', '取得單筆供應商'],
  '503:301': ['SUPPLIERS', '取得供應商清單'],
  '503:400': ['SUPPLIERS', '編輯單筆供應商'],
  '503:401': ['SUPPLIERS', '切換單筆供應商狀態'],
  '503:409': ['SUPPLIERS', '切換單筆供應商返利'],
  '504:101': ['TAGS', '新增單筆標籤'],
  '504:200': ['TAGS', '刪除單筆標籤'],
  '504:203': ['TAGS', '刪除標籤快取'],
  '504:302': ['TAGS', '取得單筆標籤'],
  '504:301': ['TAGS', '取得標籤清單'],
  '504:400': ['TAGS', '編輯單筆標籤'],
  '504:401': ['TAGS', '切換單筆標籤狀態'],
  '528:202': ['VIDEOS_ARCHIVE', '還原刪除影片'],
  '528:302': ['VIDEOS_ARCHIVE', '取得單筆影片'],
  '528:301': ['VIDEOS_ARCHIVE', '取得影片清單'],
  '505:100': ['VIDEOS', '新增單筆影片'],
  '505:200': ['VIDEOS', '刪除單筆影片'],
  '505:203': ['VIDEOS', '刪除影片快取'],
  '505:302': ['VIDEOS', '取得單筆影片'],
  '505:301': ['VIDEOS', '取得影片清單'],
  '505:400': ['VIDEOS', '編輯單筆影片(儲存用)'],
  '505:401': ['VIDEOS', '切換單筆影片狀態'],
  '527:200': ['VIDEOS_STOCKS', '刪除單筆影片'],
  '527:302': ['VIDEOS_STOCKS', '取得單筆影片'],
  '527:301': ['VIDEOS_STOCKS', '取得影片清單'],
  '527:403': ['VIDEOS_STOCKS', '編輯單筆影片(上架用)'],
  '506:100': ['AREAS', '新增單筆區域'],
  '506:200': ['AREAS', '刪除單筆區域'],
  '506:302': ['AREAS', '取得單筆區域'],
  '506:301': ['AREAS', '取得區域清單'],
  '506:400': ['AREAS', '編輯單筆區域'],
  '506:401': ['AREAS', '切換單筆區域狀態'],
  '506:203': ['AREAS', '刪除頻道快取'],
  '507:100': ['JINGANGS', '新增單筆金剛區'],
  '507:200': ['JINGANGS', '刪除單筆金剛區'],
  '507:302': ['JINGANGS', '取得單筆金剛區'],
  '507:301': ['JINGANGS', '取得金剛區清單'],
  '507:400': ['JINGANGS', '編輯單筆金剛區'],
  '507:401': ['JINGANGS', '切換單筆金剛區狀態'],
  '508:100': ['CHANNELS', '新增單筆頻道'],
  '508:200': ['CHANNELS', '刪除單筆頻道'],
  '508:302': ['CHANNELS', '取得單筆頻道'],
  '508:301': ['CHANNELS', '取得頻道清單'],
  '508:400': ['CHANNELS', '編輯單筆頻道'],
  '508:401': ['CHANNELS', '切換單筆頻道狀態'],
  '508:406': ['CHANNELS', '切換單筆頻道輪播'],
  '508:203': ['CHANNELS', '刪除頻道快取'],
  '508:448': ['CHANNELS', '切換單筆頻道起始頁'],
  '510:100': ['PUBLISHERS', '新增單筆出版商'],
  '510:200': ['PUBLISHERS', '刪除單筆出版商'],
  '510:203': ['PUBLISHERS', '刪除出版商快取'],
  '510:302': ['PUBLISHERS', '取得單筆出版商'],
  '510:301': ['PUBLISHERS', '取得出版商清單'],
  '510:400': ['PUBLISHERS', '編輯單筆出版商'],
  '510:401': ['PUBLISHERS', '切換單筆出版商狀態'],
  '511:100': ['NOTICES', '新增單筆公告'],
  '511:200': ['NOTICES', '刪除單筆公告'],
  '511:302': ['NOTICES', '取得單筆公告'],
  '511:301': ['NOTICES', '取得公告清單'],
  '511:400': ['NOTICES', '編輯單筆公告'],
  '511:401': ['NOTICES', '切換單筆公告狀態'],
  '512:100': ['ADS_APPS', '新增單筆應用中心'],
  '512:200': ['ADS_APPS', '刪除單筆應用中心'],
  '512:302': ['ADS_APPS', '取得單筆應用中心'],
  '512:301': ['ADS_APPS', '取得應用中心清單'],
  '512:400': ['ADS_APPS', '編輯單筆應用中心'],
  '512:401': ['ADS_APPS', '切換單筆應用中心狀態'],
  '534:100': ['ADS_GROUPS', '新增刊登'],
  '534:302': ['ADS_GROUPS', '取得單筆刊登'],
  '534:301': ['ADS_GROUPS', '取得刊登列表'],
  '534:400': ['ADS_GROUPS', '修改刊登'],
  '534:401': ['ADS_GROUPS', '修改刊登狀態'],
  '536:301': ['ADS_POSITIONS', '取得版位清單'],
  '536:302': ['ADS_POSITIONS', '取得單筆版位'],
  '513:100': ['PRODUCTS', '新增單筆商品'],
  '513:200': ['PRODUCTS', '刪除單筆商品'],
  '513:302': ['PRODUCTS', '取得單筆商品'],
  '513:301': ['PRODUCTS', '取得商品清單'],
  '513:400': ['PRODUCTS', '編輯單筆商品'],
  '513:401': ['PRODUCTS', '修改商品狀態'],
  '514:100': ['BUNDLING_PRODUCTS', '新增單筆副商品'],
  '514:200': ['BUNDLING_PRODUCTS', '刪除單筆副商品'],
  '514:302': ['BUNDLING_PRODUCTS', '取得單筆副商品'],
  '514:301': ['BUNDLING_PRODUCTS', '取得副商品清單'],
  '514:400': ['BUNDLING_PRODUCTS', '編輯單筆副商品'],
  '514:401': ['BUNDLING_PRODUCTS', '修改副商品狀態'],
  '515:302': ['USERS_USER', '取得單筆使用者'],
  '515:301': ['USERS_USER', '取得使用者清單'],
  '515:304': ['USERS_USER', '取得使用者VIP及特權紀錄'],
  '515:305': ['USERS_USER', '取得使用者金幣紀錄'],
  '515:306': ['USERS_USER', '取得使用者訂單紀錄'],
  '515:415': ['USERS_USER', '編輯單筆使用者代理'],
  '515:416': ['USERS_USER', '編輯單筆使用者上級'],
  '515:417': ['USERS_USER', '編輯單筆使用者金幣'],
  '515:418': ['USERS_USER', '編輯單筆使用者VIP'],
  '515:419': ['USERS_USER', '編輯單筆使用者備註'],
  '515:401': ['USERS_USER', '編輯單筆使用者狀態'],
  '515:408': ['USERS_USER', '編輯單筆使用者VIP'],
  '515:311': ['USERS_USER', '匯出使用者清單'],
  '515:312': ['USERS_USER', '取得即時在線使用者'],
  '517:105': ['ORDERS', '修改訂單'],
  '517:302': ['ORDERS', '取得單筆訂單'],
  '517:301': ['ORDERS', '取得所有訂單'],
  '517:311': ['ORDERS', '匯出條件訂單'],
  '519:103': ['POINTS', '供應商返佣'],
  '519:301': ['POINTS', '取得全部扣點紀錄'],
  '519:311': ['POINTS', '匯出扣點紀錄'],
  '521:100': ['AGENTS', '新增單筆代理商'],
  '521:302': ['AGENTS', '取得單筆代理商'],
  '521:301': ['AGENTS', '取得代理商清單'],
  '521:309': ['AGENTS', '取得代理佣金紀錄'],
  '521:401': ['AGENTS', '切換單筆代理商狀態'],
  '521:409': ['AGENTS', '切換單筆代理商佣金狀態'],
  '521:410': ['AGENTS', '編輯單筆代理商佣金設定'],
  '521:420': ['AGENTS', '編輯單筆代理商密碼'],
  '521:421': ['AGENTS', '編輯單筆代理商資金密碼'],
  '521:422': ['AGENTS', '編輯單筆代理商風控等級'],
  '521:423': ['AGENTS', '編輯單筆代理商錢包'],
  '521:428': ['AGENTS', '編輯單筆代理商備註'],
  '521:311': ['AGENTS', '匯出代理商清單'],
  '529:302': ['AGENTS_REPORT', '取得全部代理商報表'],
  '529:310': ['AGENTS_REPORT', '取得下級代理'],
  '530:302': ['AGENTS_REBATES', '取得單一返佣紀錄'],
  '530:301': ['AGENTS_REBATES', '取得全部返佣紀錄'],
  '530:103': ['AGENTS_REBATES', '手動返佣'],
  '543:301': ['AGENTS_WITHDRAWALS', '取得提款列表'],
  '543:302': ['AGENTS_WITHDRAWALS', '取得單一提款紀錄'],
  '543:311': ['AGENTS_WITHDRAWALS', '取得提款報表EXCEL'],
  '543:429': ['AGENTS_WITHDRAWALS', '審核提款'],
  '522:100': ['DOMAINS', '新增單筆域名'],
  '522:302': ['DOMAINS', '取得單筆域名'],
  '522:301': ['DOMAINS', '取得域名清單'],
  '522:401': ['DOMAINS', '切換單筆域名狀態'],
  '522:412': ['DOMAINS', '切換單筆域名推薦'],
  '522:200': ['DOMAINS', '刪除單筆域名'],
  '522:203': ['DOMAINS', '刪除域名快取'],
  '522:400': ['DOMAINS', '修改單筆域名'],
  '532:100': ['PAYMENTS_PLATFORM', '新增支付平台'],
  '532:302': ['PAYMENTS_PLATFORM', '取得單一支付平台'],
  '532:301': ['PAYMENTS_PLATFORM', '取得支付平台列表'],
  '532:400': ['PAYMENTS_PLATFORM', '修改支付平台'],
  '532:401': ['PAYMENTS_PLATFORM', '修改支付平台狀態'],
  '531:100': ['PAYMENTS_CHANNEL', '新增支付渠道'],
  '531:302': ['PAYMENTS_CHANNEL', '取得單一支付渠道'],
  '531:301': ['PAYMENTS_CHANNEL', '取得支付渠道列表'],
  '531:400': ['PAYMENTS_CHANNEL', '修改支付渠道'],
  '531:401': ['PAYMENTS_CHANNEL', '修改支付渠道狀態'],
  '524:101': ['INTERNAL_TAGS', '新增內部標籤'],
  '524:200': ['INTERNAL_TAGS', '刪除內部標籤'],
  '524:203': ['INTERNAL_TAGS', '刪除內部標籤快取'],
  '524:302': ['INTERNAL_TAGS', '取得單一內部標籤'],
  '524:301': ['INTERNAL_TAGS', '取得內部標籤清單'],
  '524:400': ['INTERNAL_TAGS', '編輯內部標籤'],
  '524:401': ['INTERNAL_TAGS', '修改內部標籤狀態'],
  '533:100': ['MENUS', '新增菜單'],
  '533:301': ['MENUS', '取得菜單清單'],
  '533:401': ['MENUS', '修改菜單狀態'],
  '533:400': ['MENUS', '修改菜單'],
  '533:200': ['MENUS', '刪除菜單'],
  '533:302': ['MENUS', '取得單筆菜單'],
  '533:314': ['MENUS', '取得主選單'],
  '538:301': ['REPORTS_PAYMENT', '取得支付報表'],
  '538:311': ['REPORTS_PAYMENT', '取得支付報表 Excel'],
  '537:301': ['REPORTS_OPERATION', '取得營運報表'],
  '537:311': ['REPORTS_OPERATION', '取得營運報表 Excel'],
  '541:301': ['REPORTS_ADS_GROUPS', '取得廣告報表'],
  '541:311': ['REPORTS_ADS_GROUPS', '取得廣告報表 Excel'],
  '520:100': ['RISK_CONTROLS', '新增單筆風險控制'],
  '520:301': ['RISK_CONTROLS', '取得風險控制清單'],
  '520:302': ['RISK_CONTROLS', '取得單筆風險控制'],
  '520:400': ['RISK_CONTROLS', '編輯單筆風險控制'],
  '520:401': ['RISK_CONTROLS', '切換單筆風險控制'],
  '520:200': ['RISK_CONTROLS', '刪除單筆風險控制'],
  '518:302': ['OTP', '取得使用者驗證碼'],
  '518:100': ['OTP', '建立使用者驗證碼'],
  '509:315': ['PHOTOS', '取得多筆系列圖片'],
  '509:316': ['PHOTOS', '取得單一系列圖片'],
  '509:317': ['PHOTOS', '取得單一系列圖片數量'],
  '509:302': ['PHOTOS', '取得單筆圖片'],
  '509:100': ['PHOTOS', '上傳單筆圖片'],
  '509:200': ['PHOTOS', '刪除單筆圖片'],
  '509:201': ['PHOTOS', '刪除系列圖片'],
  '509:303': ['PHOTOS', '圖片預覽'],
  '509:318': ['PHOTOS', '前台直接下載圖片'],
  '542:301': ['USER_LOGIN_RECORDS', '取得用戶登入紀錄清單'],
  '544:301': ['USER_EVENT_RECORDS', '取得用戶事件紀錄清單'],
  '545:301': ['AGENT_COMMISSION_AUDIT_SETTLEMENTS', '取得佣金結算單列表'],
  '545:302': ['AGENT_COMMISSION_AUDIT_SETTLEMENTS', '取得佣金結算單詳情'],
  '545:430': ['AGENT_COMMISSION_AUDIT_SETTLEMENTS', '派發'],
  '521:106': ['AGENTS', '代理商apk打包'],
  '548:301': ['SHORT_VIDEOS', '短視頻列表'],
  '548:200': ['SHORT_VIDEOS', '刪除單筆影片'],
  '548:302': ['SHORT_VIDEOS', '取得單筆影片'],
  '548:400': ['SHORT_VIDEOS', '編輯單筆影片(儲存用)'],
  '548:401': ['SHORT_VIDEOS', '切換單筆影片狀態'],
  '547:301': ['AGENT_DAILY_REPORT', '取得代理日報表'],
  '547:311': ['AGENT_DAILY_REPORT', '取得代理日報表Excel'],
  '546:321': ['DASHBOARD', '取得代理新增排行前十名'],
  '546:322': ['DASHBOARD', '取得用戶付費排行前十名'],
  '546:323': ['DASHBOARD', '取得推廣成效'],
  '546:324': ['DASHBOARD', '取得充值數據'],
  '546:325': ['DASHBOARD', '取得轉化能力'],
  '546:326': ['DASHBOARD', '取得支付詳情'],
  '549:301': ['PRODUCTS_REPORT', '取得商品報表'],
  '549:311': ['PRODUCTS_REPORT', '取得商品報表Excel'],
  '550:100': ['REDEMPTION', '新增單筆兌換活動'],
  '550:311': ['REDEMPTION', '取得序號Excel'],
  '550:302': ['REDEMPTION', '取得單筆兌換活動'],
  '550:301': ['REDEMPTION', '取得兌換活動清單'],
  '550:400': ['REDEMPTION', '編輯單筆兌換活動'],
  '550:401': ['REDEMPTION', '編輯單筆兌換活動狀態'],
  '550:327': ['REDEMPTION', '取得活動兌換Excel'],
  '550:328': ['REDEMPTION', '取得序號列表'],
  '534:200': ['ADS_GROUPS', '刪除單筆刊登'],
  '531:200': ['PAYMENTS_CHANNEL', '刪除單筆支付渠道'],
  '551:301': ['DEPOSIT_WITHDRAWAL_REPORT', '取得充提報表'],
  '551:311': ['DEPOSIT_WITHDRAWAL_REPORT', '取得充提報表 Excel'],
  '552:100': ['WHITELIST', '新增單筆白名單'],
  '552:200': ['WHITELIST', '刪除單筆白名單'],
  '552:301': ['WHITELIST', '取得白名單'],
  '553:100': ['APK_BATCH_PACKED_RECORD', '新增批次打包'],
  '553:302': ['APK_BATCH_PACKED_RECORD', '取得單筆批次打包詳情'],
  '553:301': ['APK_BATCH_PACKED_RECORD', '取得批次打包列表'],
  '521:431': ['AGENTS', '編輯單筆代理商可新增下級'],
  '542:311': ['USER_LOGIN_RECORDS', '取得用戶登入紀錄 Excel'],
  '553:401': ['APK_BATCH_PACKED_RECORD', '編輯單筆批次打包任務狀態'],
  '544:311': ['USER_EVENT_RECORDS', '取得用戶事件紀錄Excel'],
  '554:301': ['NEW_INSTALLATION_REPORT', '取得新增安裝報表'],
  '554:311': ['NEW_INSTALLATION_REPORT', '取得新增安裝報表Excel'],
  '532:200': ['PAYMENTS_PLATFORM', '刪除單筆支付平台'],
  '557:301': ['USER_TAG_STATISTIC', '取得用戶標籤統計列表'],
  '557:311': ['USER_TAG_STATISTIC', '取得用戶標籤統計Excel'],
  '507:203': ['JINGANGS', '刪除金剛區快取'],
  '553:329': ['APK_BATCH_PACKED_RECORD', '取得打包排程設置'],
  '553:433': ['APK_BATCH_PACKED_RECORD', '編輯打包排程設置'],
  '559:301': ['USER_CONVERSION_STATISTIC', '取得用戶轉換分析列表'],
  '559:311': ['USER_CONVERSION_STATISTIC', '取得用戶轉換分析excel'],
  '553:330': ['APK_BATCH_PACKED_RECORD', '取得最新發布版號'],
  'PERMISSIONS:GOOGLE_AUTH_GENERATE_QRCODE': [
    'PERMISSIONS',
    '取得二階段驗證Qrcode',
  ],
  'PERMISSIONS:GOOGLE_AUTH_TOKEN_VERIFY': ['PERMISSIONS', '驗證二階段Token'],
  '562:100': ['LADING_STATISTIC_BY_CODE', '新增單筆落地頁統計代碼'],
  '562:200': ['LADING_STATISTIC_BY_CODE', '刪除單筆落地頁統計代碼'],
  '562:301': ['LADING_STATISTIC_BY_CODE', '取得單筆落地頁統計代碼'],
  '562:302': ['LADING_STATISTIC_BY_CODE', '取得落地頁統計代碼清單'],
  '562:400': ['LADING_STATISTIC_BY_CODE', '編輯單筆落地頁統計代碼'],
  '563:301': ['USER_RETENTION_REPORT', '取得用戶留存報表'],
  '563:311': ['USER_RETENTION_REPORT', '取得用戶留存報表Excel'],
  '564:301': ['LANDING_SETTING', '取得導覽站配置列表'],
  '564:302': ['LANDING_SETTING', '取得單筆導覽站配置'],
  '564:100': ['LANDING_SETTING', '新增單筆導覽站配置'],
  '564:400': ['LANDING_SETTING', '編輯單筆導覽站配置'],
  '564:401': ['LANDING_SETTING', '切換單筆導覽站配置狀態'],
  '564:200': ['LANDING_SETTING', '刪除單筆導覽站配置'],
  '561:301': ['STATISTICS', '取得後台配置點擊紀錄列表'],
  '561:311': ['STATISTICS', '取得後台配置點擊紀錄 Excel'],
  '565:301': ['RETENTION', '取得週/月留存報表'],
  '565:311': ['RETENTION', '取得週/月留存報表Excel'],
  '512:203': ['ADS_APPS', '刪除應用中心快取'],
  '534:203': ['ADS_GROUPS', '刪除廣告快取'],
  '511:203': ['NOTICE', '刪除公告快取'],
  '564:203': ['LANDING_SETTING', '刪除導覽站配置快取'],
  '573:301': ['AGENT_DAILY_INSTALLED', '取得代理日安裝列表'],
  '573:311': ['AGENT_DAILY_INSTALLED', '取得代理日安裝 Excel'],
  '531:331': ['PAYMENTS_CHANNEL', '取得錯誤支付渠道通知'],
  '574:301': ['USER_WITHDRAWAL', '取得使用者提款列表'],
  '574:302': ['USER_WITHDRAWAL', '取得使用者提款明細'],
  '574:311': ['USER_WITHDRAWAL', '取得使用者提款 Excel'],
  '515:332': ['USERS_USER', '取得用戶資金安全'],
  '515:442': ['USERS_USER', '修改用戶資金安全'],
  '574:429': ['USER_WITHDRAWAL', '審核提款'],
  '574:430': ['USER_WITHDRAWAL', '提款出款'],
  '515:421': ['USERS_USER', '重置用戶資金密碼'],
  '575:302': ['GAME_PLATFORM_CONFIG', '取得單筆遊戲配置'],
  '575:400': ['GAME_PLATFORM_CONFIG', '修改遊戲配置'],
  '575:401': ['GAME_PLATFORM_CONFIG', '切換遊戲配置狀態'],
  '577:100': ['JINGANG_TEMPLATE_CONFIG', '新增金剛區模板配置'],
  '577:200': ['JINGANG_TEMPLATE_CONFIG', '刪除金剛區模板配置'],
  '577:301': ['JINGANG_TEMPLATE_CONFIG', '取得金剛區模板配置列表'],
  '577:302': ['JINGANG_TEMPLATE_CONFIG', '取得單筆金剛區模板配置'],
  '577:400': ['JINGANG_TEMPLATE_CONFIG', '修改金剛區模板配置'],
  '577:401': ['JINGANG_TEMPLATE_CONFIG', '修改金剛區模板配置狀態'],
  '577:443': ['JINGANG_TEMPLATE_CONFIG', '修改金剛區模板配置頻道'],
  '577:203': ['JINGANG_TEMPLATE_CONFIG', '刪除金剛區模板快取'],
  '579:301': ['ADS_APP_CLICKS_REPORT', '取得應用中心點擊報表'],
  '579:311': ['ADS_APP_CLICKS_REPORT', '取得應用中心點擊報表Excel'],
  '578:301': ['JINGANG_CLICKS_REPORT', '取得金剛區點擊報表'],
  '578:311': ['JINGANG_CLICKS_REPORT', '取得金剛區點擊報表Excel'],
  '575:203': ['GAME_PLATFORM_CONFIG', '刪除快取'],
  '580:302': ['BANNER_PARAM_CONFIG', '取得單筆廣告參數配置'],
  '580:301': ['BANNER_PARAM_CONFIG', '取得廣告參數配置列表'],
  '580:400': ['BANNER_PARAM_CONFIG', '更新單筆廣告參數配置'],
  '581:100': ['DOWNLOAD_TOOL_USER', '編輯下載工具平台帳密'],
  '581:301': ['DOWNLOAD_TOOL_USER', '取得下載工具平台帳密列表'],
  '581:302': ['DOWNLOAD_TOOL_USER', '取得單筆下載工具平台帳密'],
  '546:333': ['DASHBOARD', '取得用戶在線人數'],
  '576:334': ['GAME_PLATFORM', '取得遊戲餘額'],
  '576:444': ['GAME_PLATFORM', '轉回金幣'],
  '531:335': ['PAYMENTS_CHANNEL', '取得幣別渠道'],
  '574:336': ['USER_WITHDRAWAL', '取得三方手動查單'],
  '574:329': ['USER_WITHDRAWAL', '取得自動排程設置'],
  '574:433': ['USER_WITHDRAWAL', '修改自動排程設置'],
  '583:100': ['POINTS_PAYOUT', '新增單筆金幣派發'],
  '583:107': ['POINTS_PAYOUT', '新增批量金幣派發'],
  '583:301': ['POINTS_PAYOUT', '取得金幣派發列表'],
  '583:311': ['POINTS_PAYOUT', '取得金幣派發Excel'],
  '584:301': ['GAME_DEPOSIT_WITHDRAWAL', '取得遊戲充提報表'],
  '584:311': ['GAME_DEPOSIT_WITHDRAWAL', '取得遊戲充提報表 Excel'],
  '576:338': ['GAME_PLATFORM', '取得用戶投注記錄'],
  '515:420': ['USERS_USER', '編輯單筆使用者密碼'],
  '585:430': ['POINTS_FIRST_PAYOUT', '審核金幣首充派發'],
  '585:301': ['POINTS_FIRST_PAYOUT', '取得首充活動審核列表'],
  '585:311': ['POINTS_FIRST_PAYOUT', '取得首充活動審核Excel'],
  '585:302': ['POINTS_FIRST_PAYOUT', '取得單筆首充活動審核'],
  '585:329': ['POINTS_FIRST_PAYOUT', '取得首充活動審核排程設置'],
  '585:434': ['POINTS_FIRST_PAYOUT', '編輯首充活動審核排程設置狀態'],
  '582:100': ['COMIC', '新增漫畫'],
  '582:200': ['COMIC', '刪除漫畫'],
  '582:301': ['COMIC', '取得漫畫清單'],
  '582:302': ['COMIC', '取得單筆漫畫'],
  '582:400': ['COMIC', '修改漫畫'],
  '582:401': ['COMIC', '修改漫畫狀態'],
  '586:311': ['VIDEO_VIEWS', '取得影片觀看次數excel'],
  '574:445': ['USER_WITHDRAWAL', '用戶建立提款單'],
  '587:100': ['CAMPAIGN', '新增單筆活動'],
  '587:301': ['CAMPAIGN', '取得活動清單'],
  '587:302': ['CAMPAIGN', '取得單筆活動'],
  '587:400': ['CAMPAIGN', '編輯單筆活動'],
  '587:401': ['CAMPAIGN', '切換單筆活動狀態'],
  '586:302': ['VIDEO_VIEWS', '取得影片觀看次數'],
  '504:446': ['TAGS', '是否推薦更改'],
  '587:203': ['CAMPAIGN', '刪除活動快取'],
  '521:339': ['AGENTS', '取得apk下載連結'],
  '588:100': ['NAVIGATION', '新增單筆路由設定'],
  '588:203': ['NAVIGATION', '刪除路由設定快取'],
  '588:301': ['NAVIGATION', '取得路由設定'],
  '588:302': ['NAVIGATION', '取得單筆路由設定'],
  '588:400': ['NAVIGATION', '編輯單筆路由設定'],
  '588:401': ['NAVIGATION', '切換單筆路由設定狀態'],
  '590:301': ['OPERATOR_RECORD', '取得操作記錄列表'],
  '591:100': ['CRAWLER_PLATFORM', '配置採集站台'],
  '591:200': ['CRAWLER_PLATFORM', '刪除採集站台'],
  '591:301': ['CRAWLER_PLATFORM', '取得採集站台清單'],
  '591:400': ['CRAWLER_PLATFORM', '更新採集站台'],
  '592:301': ['CRAWLER_RECORD', '取得採集資料表'],
  '592:401': ['CRAWLER_RECORD', '重新開始採集資料'],
  '593:100': ['CRAWLER_TASK', '配置採集任務'],
  '593:200': ['CRAWLER_TASK', '刪除採集任務'],
  '593:301': ['CRAWLER_TASK', '取得採集任務清單'],
  '593:401': ['CRAWLER_TASK', '切換採集任務狀態'],
  '594:100': ['CRAWLER_DOWNLOAD_TASK', '配置採集下載任務'],
  '594:200': ['CRAWLER_DOWNLOAD_TASK', '刪除採集下載任務'],
  '594:301': ['CRAWLER_DOWNLOAD_TASK', '取得採集下載任務清單'],
  '594:401': ['CRAWLER_DOWNLOAD_TASK', '切換採集下載狀態'],
  '595:100': ['CRAWLER_UPLOAD_TASK', '配置採集上傳任務'],
  '595:200': ['CRAWLER_UPLOAD_TASK', '刪除採集上傳任務'],
  '595:301': ['CRAWLER_UPLOAD_TASK', '取得採集上傳任務清單'],
  '595:401': ['CRAWLER_UPLOAD_TASK', '切換採集上傳狀態'],
  '596:100': ['CRAWLER_PLATFORM_CATEGORY', '配置採集站台類別'],
  '596:200': ['CRAWLER_PLATFORM_CATEGORY', '刪除採集站台類別'],
  '596:301': ['CRAWLER_PLATFORM_CATEGORY', '取得採集站台類別清單'],
  '596:400': ['CRAWLER_PLATFORM_CATEGORY', '更新採集站台類別'],
  '597:100': ['KEYWORD_STATISTIC', '新增關鍵字'],
  '597:200': ['KEYWORD_STATISTIC', '刪除關鍵字'],
  '597:301': ['KEYWORD_STATISTIC', '取得關鍵字清單'],
  '597:400': ['KEYWORD_STATISTIC', '更新關鍵字'],
  '602:100': ['POSTS', '新增貼文'],
  '602:200': ['POSTS', '刪除貼文'],
  '602:301': ['POSTS', '取得貼文清單'],
  '602:302': ['POSTS', '取得單筆貼文'],
  '602:400': ['POSTS', '修改貼文'],
  '602:401': ['POSTS', '修改貼文狀態'],
  '603:203': ['GLOBAL_CONFIG', '刪除參數配置快取'],
  '603:301': ['GLOBAL_CONFIG', '取得參數配置列表'],
  '603:400': ['GLOBAL_CONFIG', '修改參數配置'],
};

export const ModulePermissionUp = async (queryRunner: QueryRunner) => {
  const rawData = await queryRunner.query(`
    SELECT
      DISTINCT CONCAT(\`ModulePermission\`.\`ModuleIdentity\`, ":", \`ModulePermission\`.\`Scope\`)  AS \`modulePermissions\`
    FROM
      \`ModulePermissions\` \`ModulePermission\`
  `);
  const modulePermissions = rawData.map((r) => r.modulePermissions);
  const newPermissions = _.difference(
    Object.keys(PermissionTables),
    modulePermissions,
  );
  for (const key of newPermissions) {
    const moduleName = PermissionTables[key][0];
    const moduleIdentity = key.split(':').at(0);
    const scope = key.split(':').at(1);
    const scopeDescription = PermissionTables[key][1];
    await queryRunner.query(
      `INSERT IGNORE INTO \`ModulePermissions\` (\`ModuleName\`, \`ModuleIdentity\`, \`Scope\`, \`ScopeDescription\`) VALUES (\'${moduleName}\', \'${moduleIdentity}\', \'${scope}\', \'${scopeDescription}\');`,
    );
    await queryRunner.query(
      `INSERT IGNORE INTO \`UserRolePermissions\` VALUES ((SELECT LAST_INSERT_ID()), 1);`,
    );
  }
};

export const ModulePermissionDown = async (queryRunner: QueryRunner) => {
  for (const [key, value] of Object.entries(PermissionTables)) {
    const moduleName = value[0];
    const moduleIdentity = key.split(':').at(0);
    const scope = key.split(':').at(1);
    const scopeDescription = value[1];
    const raw: { id: number }[] = await queryRunner.query(`
            SELECT id FROM \`ModulePermissions\` WHERE \`ModuleName\` = \'${moduleName}\' AND \`ModuleIdentity\` = \'${moduleIdentity}\' AND \`Scope\` = \'${scope}\' AND \`ScopeDescription\` = \'${scopeDescription}\' LIMIT 1;
          `);

    if (raw.length > 0) {
      await queryRunner.query(`
              DELETE FROM \`ModulePermissions\` WHERE \`id\` = ${raw[0].id};
            `);
      await queryRunner.query(`
              DELETE FROM \`UserRolePermissions\` WHERE \`PermissionId\` = ${raw[0].id} AND RoleId = 1;
            `);
    }
  }
};
